{%  extends "ARLouvreBundle::layout.html.twig" %}

{% block title %}Paiement - {{ parent() }}{%  endblock %}

{% block resaActive %}class="active"{% endblock %}

{% block titleSection %}Paiement des billets :{% endblock %}

{% block body %}

    {# TODO à mettre dans un template#}
    <div class="row resa-info">
        <p class="bg-info text-info text-center  col-sm-4 col-sm-offset-4 col-xs-8 col-xs-offset-2">
            Vous désirez {{ resa.nbBillets }} billet(s) {% if resa.demijournee %}demi-{% endif %}journée pour le {{ resa.dateresa|date("d/m/Y") }}
        </p>
        <a class="btn btn-default col-sm-4 col-sm-offset-4  col-xs-8 col-xs-offset-2" href="{{ path('louvre_resa_initialiser', {'resaCode': resa.resaCode}) }}">Modifier ma réservation</a>
    </div>

    <div class="row">

        <div class="text-center">

            {{ form_start(form, {'attr': {'class': 'col-sm-6 col-sm-offset-3'}}) }}

                {{ form_errors(form) }}

                <div class="form-group">
                    {{ form_label(form.email, 'Entrez un email') }}
                    {{ form_errors(form.email) }}
                    {{ form_widget(form.email, {'attr': {'class': 'form-control'}}) }}
                </div>

                <div>
                    <p><strong>Montant de la réservation : <br> {{ resa.prixTotal }} €</strong></p>
                </div>

                <script
                        src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                        data-key="{{ public_key }}"
                        data-amount="{{ resa.prixTotal * 100 }}"
                        data-name="Votre réservation n° {{ resa.resaCode }}"
                        data-locale="auto">
                </script>

            {{ form_end(form) }}

        </div>

        <a href="{{ path('louvre_resa_voir') }}">lien provisoire étape suivante</a>

    </div>

{% endblock %}